# 隱私政策更新計劃 - Facebook 應用審核合規

## 📋 更新目標

基於 Facebook 應用審核要求，我們需要更新隱私政策以符合 Meta 平台政策：

### 1. Facebook 數據使用透明化
- 明確說明 `ads_read` 和 `ads_management` 權限的具體用途
- 詳細解釋 Facebook 數據的處理流程
- 提供完整的資料刪除機制說明

### 2. 隱私政策可見性
- 確保隱私政策在 Facebook OAuth 對話框中顯示
- 提供清晰的隱私政策連結和存取方式
- 符合 Meta 平台政策第 4.a 條要求

### 3. 用戶權利保護
- 詳細說明用戶對個人資料的控制權
- 提供完整的資料刪除和撤銷授權機制
- 符合 GDPR 和台灣個資法要求

## 🎯 具體更新內容

### 1. Facebook 權限使用說明

#### ads_read 權限
- **用途**：讀取廣告帳戶基本資訊、廣告活動數據、廣告成效指標
- **資料範圍**：廣告帳戶 ID、廣告活動名稱、花費、點擊、轉換等匯總數據
- **處理方式**：僅用於健康檢查分析，不做任何修改

#### ads_management 權限
- **用途**：存取詳細的廣告帳戶管理資訊
- **資料範圍**：廣告組設定、目標受眾、廣告素材資訊
- **處理方式**：用於深度分析和優化建議生成

### 2. 資料處理流程

#### 資料收集
- **授權時機**：用戶明確點擊授權後才開始收集
- **收集範圍**：僅收集健康檢查所需的必要資料
- **收集頻率**：僅在用戶執行健康檢查時收集

#### 資料使用
- **AI 分析**：使用 OpenAI GPT-4 進行智能分析
- **建議生成**：基於分析結果提供個人化優化建議
- **報告產出**：生成健康檢查報告供用戶查看

#### 資料保存
- **臨時處理**：資料僅在分析期間暫時處理
- **不永久儲存**：不在我們的系統中永久保存 Facebook 資料
- **自動清理**：24 小時後自動清理所有 Facebook 資料

### 3. 用戶控制權

#### 授權管理
- **撤銷授權**：用戶可隨時撤銷 Facebook 授權
- **權限查看**：用戶可查看已授予的權限範圍
- **帳戶解綁**：用戶可在設定中解除 Facebook 帳戶連結

#### 資料刪除
- **即時刪除**：用戶登出時立即刪除所有 Facebook 資料
- **手動刪除**：提供手動刪除端點 `/api/facebook/data-deletion`
- **Facebook 設定**：用戶可在 Facebook 應用設定中移除我們的應用

## 🔧 技術實現

### 1. 隱私政策顯示
```javascript
// Facebook OAuth URL 參數
const authUrl = `https://www.facebook.com/v19.0/dialog/oauth?` +
  `client_id=${appId}&` +
  `redirect_uri=${encodeURIComponent(redirectUri)}&` +
  `scope=ads_read,ads_management&` +
  `response_type=code&` +
  `state=${userId}&` +
  `auth_type=rerequest&` +  // 確保隱私政策顯示
  `display=popup`;
```

### 2. 資料刪除端點
```javascript
// POST /api/facebook/data-deletion
app.post('/api/facebook/data-deletion', (req, res) => {
  // 處理 Facebook 資料刪除請求
  // 返回確認回應
});
```

### 3. 權限檢查
```javascript
// GET /api/diagnosis/facebook-permissions
app.get('/api/diagnosis/facebook-permissions', (req, res) => {
  // 檢查 Facebook 權限狀態
  // 返回權限資訊
});
```

## 📄 隱私政策更新內容

### 更新項目 1：Facebook 數據收集說明
```markdown
### Facebook 廣告數據收集

當您使用 Facebook 廣告健檢功能時，我們會：

1. **請求權限**：
   - `ads_read`：讀取廣告帳戶和廣告活動資訊
   - `ads_management`：存取詳細廣告管理資訊

2. **收集資料**：
   - 廣告帳戶基本資訊（ID、名稱）
   - 廣告活動數據（花費、點擊、轉換）
   - 廣告成效指標（CTR、ROAS、CPC）

3. **使用目的**：
   - 進行廣告健康檢查分析
   - 生成 AI 優化建議
   - 提供個人化改善方案
```

### 更新項目 2：資料處理流程
```markdown
### Facebook 資料處理流程

1. **授權驗證**：確認用戶已授權存取 Facebook 廣告資料
2. **資料獲取**：透過 Facebook Marketing API 獲取資料
3. **AI 分析**：使用 OpenAI GPT-4 進行智能分析
4. **建議生成**：基於分析結果產生個人化建議
5. **報告呈現**：將分析結果以易懂方式呈現給用戶
6. **資料清理**：24 小時後自動清理所有 Facebook 資料
```

### 更新項目 3：用戶權利說明
```markdown
### 您對 Facebook 資料的權利

1. **撤銷授權**：您可隨時撤銷 Facebook 授權
2. **資料刪除**：您可要求刪除所有 Facebook 相關資料
3. **權限查看**：您可查看已授予的權限範圍
4. **帳戶解綁**：您可在設定中解除 Facebook 帳戶連結

### 資料刪除方式
- **自動刪除**：登出時自動刪除
- **手動刪除**：使用資料刪除端點
- **Facebook 設定**：在 Facebook 應用設定中移除
```

## 🎬 Facebook 應用審核準備

### 1. 測試頁面準備
- ✅ 創建完整的 E2E 測試頁面
- ✅ 包含隱私政策可見性驗證
- ✅ 提供權限檢查功能
- ✅ 展示完整的使用流程

### 2. 文檔準備
- ✅ META_APP_REVIEW_E2E_GUIDE.md
- ✅ META_APP_REVIEW_RESPONSE.md
- ✅ 完整的隱私政策更新

### 3. 技術準備
- ✅ 修復重複的 OAuth 端點
- ✅ 增強隱私政策顯示參數
- ✅ 實現資料刪除端點
- ✅ 添加權限檢查功能

## 📊 實施計劃

### 階段 1：隱私政策更新 (立即)
- 更新隱私政策文件
- 部署到 https://thinkwithblack.com/privacy
- 確保 Facebook OAuth 正確顯示隱私政策

### 階段 2：技術優化 (已完成)
- 修復重複的 OAuth 端點 ✅
- 增強隱私政策顯示參數 ✅
- 實現完整的資料刪除機制 ✅

### 階段 3：測試驗證 (進行中)
- 完善 E2E 測試頁面 ✅
- 添加權限檢查功能 ✅
- 創建審核指導文檔 ✅

### 階段 4：審核提交 (準備中)
- 提交 Facebook 應用審核
- 提供完整的測試文檔
- 配合審核團隊進行測試

## 🔍 合規檢查清單

### Meta 平台政策合規
- ✅ 隱私政策在 OAuth 對話框中顯示
- ✅ 清楚說明權限使用目的
- ✅ 提供完整的資料刪除機制
- ✅ 符合資料使用透明化要求

### 資料保護法規合規
- ✅ 符合 GDPR 要求
- ✅ 符合台灣個資法要求
- ✅ 提供用戶完整的資料控制權
- ✅ 實現資料最小化原則

### 技術安全合規
- ✅ HTTPS 全站加密
- ✅ OAuth 2.0 安全認證
- ✅ 資料加密傳輸和儲存
- ✅ 存取控制和權限管理

---

**此更新計劃將確保我們的隱私政策完全符合 Facebook 應用審核要求，並為用戶提供完整的資料保護。**